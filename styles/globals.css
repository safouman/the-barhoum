@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    color-scheme: light;
    --font-base: var(--font-inter), var(--font-noto-naskh, "Noto Naskh Arabic"), "Amiri", serif;
    --font-heading: var(--font-inter), var(--font-noto-naskh, "Noto Naskh Arabic"), "Amiri", serif;
    --font-ui: var(--font-inter), var(--font-noto-naskh, "Noto Naskh Arabic"), "Amiri", serif;
    --font-signature-latin: "Brush Script MT", "Comic Sans MS", cursive;
    --font-signature-arabic: "Arslan Wessam A";
    --font-weight-regular: 400;
    --font-weight-bold: 600;
    --color-background: #ffffff;
    --color-surface: #f8f8f8;
    --color-text: #333333;
    --color-subtle: #555555;
    --color-primary: #2ad6ca;
    --color-accent: #ffffff;
    --color-accent-text: #333333;
    --color-border: #e4e4e3;
    --color-focus: #2ad6ca;
    --page-gradient: #ffffff;
    --radius-sm: 0.75rem;
    --radius-md: 1.25rem;
    --radius-lg: 2rem;
    --radius-interactive: 0.5rem;
    --shadow-sm: 0 16px 36px rgba(13, 28, 28, 0.12);
    --shadow-md: 0 28px 60px rgba(20, 35, 35, 0.16);
    --space-xs: 0.75rem;
    --space-sm: 1.5rem;
    --space-md: 3rem;
    --space-lg: 5rem;
    --space-xl: 7rem;
    --leading-heading: 1.3;
    --leading-body: 1.6;
    --leading-tight: var(--leading-heading);
    --leading-base: var(--leading-body);
    --leading-relaxed: 1.85;
    --font-size-h1: clamp(2.75rem, 5.5vw, 3.75rem);
    --font-size-h2: clamp(2rem, 4vw, 2.75rem);
    --font-size-h3: clamp(1.5rem, 3vw, 2rem);
    --font-size-body: 1rem;
    --font-size-body-lg: clamp(1.12rem, 2.4vw, 1.35rem);
    --font-size-label: 0.875rem;
    --font-size-eyebrow: clamp(0.8rem, 1.1vw, 0.95rem);
    --font-size-quote: clamp(1.6rem, 3.4vw, 2.2rem);
    --font-size-section-title: clamp(2rem, 4vw, 2.75rem);
}

@font-face {
    font-family: "Arslan Wessam A";
    src: url("/fonts/arslan-wessam-a.ttf") format("truetype");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

html[dir="rtl"] {
    --font-base: var(--font-inter), var(--font-noto-naskh, "Noto Naskh Arabic"), "Amiri", serif;
    --font-heading: var(--font-inter), var(--font-noto-naskh, "Noto Naskh Arabic"), "Amiri", serif;
    --font-ui: var(--font-inter), var(--font-noto-naskh, "Noto Naskh Arabic"), "Amiri", serif;
}

html[dir="rtl"] body,
html[dir="rtl"] :where(p, h1, h2, h3, h4, h5, h6, a, span, li, blockquote, small, label, button, strong, em) {
    letter-spacing: 0 !important;
    font-variant-ligatures: common-ligatures contextual;
    font-feature-settings: "liga" 1, "calt" 1, "kern" 1;
    text-rendering: optimizeLegibility;
}

html[dir="rtl"] [class*="tracking-"] {
    letter-spacing: 0 !important;
}

html[dir="rtl"] p {
    font-size: clamp(1.06rem, 4.6vw, 1.18rem);
    line-height: 1.9;
}

@media (min-width: 768px) {
    html[dir="rtl"] {
        font-size: 112.5%;
        --leading-heading: 1.32;
        --leading-body: 1.9;
        --leading-base: var(--leading-body);
        --leading-relaxed: 2;
        --font-size-h1: clamp(2.6rem, 6.5vw, 3.3rem);
        --font-size-h2: clamp(2rem, 5vw, 2.6rem);
        --font-size-h3: clamp(1.55rem, 3.8vw, 1.95rem);
        --font-size-body-lg: clamp(1.05rem, 2.8vw, 1.2rem);
        --font-size-section-title: clamp(2.1rem, 5vw, 2.7rem);
        --space-xs: 0.95rem;
        --space-sm: 1.9rem;
        --space-md: 3.6rem;
        --space-lg: 5rem;
        --space-xl: 6.6rem;
    }

    html[dir="rtl"] p {
        font-size: var(--font-size-body);
        line-height: var(--leading-body);
    }
}

@media (min-width: 1024px) {
    html[dir="rtl"] {
        font-size: 118.75%;
        --font-size-h1: clamp(2.7rem, 5.4vw, 3.2rem);
        --font-size-h2: clamp(2.1rem, 4vw, 2.5rem);
        --font-size-h3: clamp(1.6rem, 3.2vw, 1.9rem);
        --font-size-body-lg: clamp(1.08rem, 2vw, 1.18rem);
        --font-size-section-title: clamp(2.2rem, 4.2vw, 2.6rem);
        --space-md: 3.8rem;
        --space-lg: 5.2rem;
        --space-xl: 6.8rem;
    }
}

html[dir="rtl"] .text-eyebrow {
    letter-spacing: 0 !important;
}

html[dir="rtl"] .text-display {
    letter-spacing: 0;
}

@layer base {
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    h1,
    h2,
    h3 {
        font-family: var(--font-heading), var(--font-base), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        font-weight: var(--font-weight-bold);
        line-height: var(--leading-heading);
        color: var(--color-text);
        margin: 0;
    }

    h1 {
        font-size: var(--font-size-h1);
    }

    h2 {
        font-size: var(--font-size-h2);
    }

    h3 {
        font-size: var(--font-size-h3);
    }

    p,
    li,
    blockquote {
        font-size: var(--font-size-body);
        line-height: var(--leading-body);
    }

    small,
    label {
        font-size: var(--font-size-label);
        line-height: var(--leading-body);
    }

    strong,
    b {
        font-weight: var(--font-weight-bold);
    }

    body {
        margin: 0;
        background: var(--page-gradient, var(--color-background));
        color: var(--color-text);
        font-family: var(--font-base), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        font-weight: var(--font-weight-regular);
        line-height: var(--leading-body);
        transition: background 0.3s ease-out, color 0.3s ease-out;
        position: relative;
        min-height: 100vh;
    }

    html[dir="rtl"] body {
        font-family: var(--font-base), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    @supports (-webkit-touch-callout: none) {
        html[dir="rtl"] {
            --leading-body: 1.8;
            --leading-base: 1.8;
        }
    }

    a {
        color: inherit;
        text-decoration: none;
    }

    a:focus-visible,
    button:focus-visible,
    input:focus-visible,
    textarea:focus-visible {
        outline: 2px solid var(--color-focus);
        outline-offset: 2px;
    }

    button {
        cursor: pointer;
        background: transparent;
        border: none;
        font-family: var(--font-base);
    }

    img,
    video {
        max-width: 100%;
        display: block;
    }

    main {
        min-height: 100vh;
    }

    .rtl {
        direction: rtl;
    }

    .ltr {
        direction: ltr;
    }

    .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
    }
}

@layer components {
    .text-eyebrow {
        font-size: var(--font-size-eyebrow);
        line-height: var(--leading-heading);
        text-transform: uppercase;
        letter-spacing: 0.35em;
        color: var(--color-subtle);
        font-weight: 500;
    }

    .text-display {
        font-family: var(--font-heading), var(--font-base), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        font-size: var(--font-size-h1);
        line-height: var(--leading-heading);
        letter-spacing: -0.012em;
        color: var(--color-text);
        font-weight: var(--font-weight-bold);
    }

    .text-lead {
        max-width: 62ch;
        font-size: var(--font-size-body-lg);
        line-height: var(--leading-body);
        color: var(--color-subtle);
        font-weight: var(--font-weight-regular);
    }

    .text-body-lg {
        font-size: var(--font-size-body-lg);
        line-height: var(--leading-body);
        font-weight: var(--font-weight-regular);
    }

    .text-quote {
        font-family: var(--font-heading), var(--font-base), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        font-size: var(--font-size-quote);
        line-height: var(--leading-body);
        color: var(--color-text);
        font-weight: var(--font-weight-regular);
    }

    .text-smallcaps {
        font-size: var(--font-size-label);
        line-height: var(--leading-body);
        text-transform: uppercase;
        letter-spacing: 0.4em;
        color: var(--color-subtle);
        font-weight: var(--font-weight-regular);
    }

    .text-label {
        font-size: var(--font-size-label);
        line-height: var(--leading-body);
        color: var(--color-subtle);
        font-weight: var(--font-weight-regular);
    }

    .text-section-title {
        font-family: var(--font-heading), var(--font-base), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        font-size: var(--font-size-section-title);
        line-height: var(--leading-heading);
        color: var(--color-text);
        font-weight: var(--font-weight-bold);
    }

    .heading-1,
    .heading-2,
    .heading-3 {
        font-family: var(--font-heading), var(--font-base), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        font-weight: var(--font-weight-bold);
        line-height: var(--leading-heading);
        color: var(--color-text);
        margin: 0;
    }

    .heading-1 {
        font-size: var(--font-size-h1);
    }

    .heading-2 {
        font-size: var(--font-size-h2);
    }

    .heading-3 {
        font-size: var(--font-size-h3);
    }

    .font-signature-latin {
        font-family: "Brush Script MT", "Comic Sans MS", cursive;
        font-weight: 400;
    }

    .font-signature-arabic {
        font-family: var(--font-signature-arabic), "Noto Naskh Arabic", serif;
        font-weight: 400;
        letter-spacing: 0.01em;
    }

    .btn {
        border-radius: var(--radius-interactive);
    }

    .btn-solid {
        background: var(--color-primary);
        color: var(--color-accent);
        border-color: var(--color-primary);
        letter-spacing: 0.07em;
        transition: background 0.2s ease;
    }

    .btn-solid:hover {
        background: #24b9af;
    }

    .btn-solid:focus-visible {
        outline: 2px solid var(--color-primary);
        outline-offset: 2px;
    }

    .btn-outline {
        background: transparent;
        color: var(--color-text);
        border-color: var(--color-primary);
        letter-spacing: 0.07em;
        transition: background 0.2s ease, color 0.2s ease, outline-color 0.2s ease;
    }

    .btn-outline:hover {
        background: rgba(42, 214, 202, 0.10);
        color: var(--color-text);
    }

    .btn-outline:focus-visible {
        outline: 2px solid var(--color-primary);
        outline-offset: 2px;
    }


    .surface-panel {
        @apply rounded-[8px] border border-border bg-surface bg-opacity-90;
    }

    .surface-muted {
        @apply rounded-[22px] border border-border bg-background shadow-sm;
    }

    /* removed .surface-accent to avoid token confusion */

    [data-section="true"] {
        text-align: left;
        padding-block: clamp(6rem, 18vh, 7.5rem);
    }

    [data-section="true"] > header {
        align-items: flex-start;
        margin-bottom: clamp(3rem, 6vw, 4rem);
    }

    [data-section="true"] > header h2 {
        font-family: var(--font-heading), sans-serif;
        letter-spacing: 0.22em;
        font-weight: 600;
        color: #1d1c1a;
    }

    [data-section="true"] > header::after {
        background: rgba(29, 28, 26, 0.1);
        width: 5rem;
        margin-top: 1rem;
    }

    .accordion-prose {
        @apply flex flex-col gap-4 text-gray-700 leading-[1.9];
        font-size: clamp(0.98rem, 2.9vw, 1.09rem);
        color: #374151;
    }

    .accordion-prose-paragraph {
        @apply m-0 whitespace-pre-wrap;
    }

    .accordion-prose-paragraph + .accordion-prose-paragraph {
        @apply mt-3;
    }

    .accordion-prose-heading {
        @apply font-semibold tracking-tight;
        color: rgba(42, 214, 202, 0.9);
        font-size: clamp(1.08rem, 3.2vw, 1.28rem);
        line-height: 1.5;
    }

    .accordion-prose strong {
        @apply font-semibold;
        color: rgba(42, 214, 202, 0.92);
    }

    .accordion-prose em {
        color: rgba(55, 65, 81, 0.85);
    }

    .accordion-prose p:first-of-type em {
        @apply font-medium;
        color: rgba(55, 65, 81, 0.92);
    }

    .accordion-prose a {
        @apply underline decoration-transparent transition-colors duration-200;
    }

    .accordion-prose a:hover,
    .accordion-prose a:focus-visible {
        @apply decoration-primary text-primary;
    }

    @media (min-width: 640px) {
        .accordion-prose {
            font-size: clamp(1.02rem, 2.4vw, 1.14rem);
        }
    }

    @media (min-width: 1024px) {
        .accordion-prose {
            gap: 1.35rem;
            font-size: clamp(1.05rem, 1.9vw, 1.18rem);
        }
    }

    html[dir="rtl"] .accordion-prose {
        font-size: clamp(1.05rem, 3.2vw, 1.22rem);
        line-height: 2;
        letter-spacing: 0;
    }

    html[dir="rtl"] .accordion-prose-heading {
        font-size: clamp(1.12rem, 3vw, 1.32rem);
        line-height: 1.6;
    }

    html[dir="rtl"] .accordion-prose strong {
        color: rgba(32, 171, 161, 0.94);
    }

    html[dir="rtl"] .accordion-prose em {
        color: rgba(55, 65, 81, 0.88);
    }

    @keyframes progress {
        from { width: 0%; }
        to { width: 100%; }
    }
}
